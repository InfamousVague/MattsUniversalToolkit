import{s as we,z as Oe,e as q,a as I,c as C,b as H,g as D,f as S,l as z,i as F,h as b,A as Qe,B as Re,C as We,t as ce,d as $e,j as ue,n as ne,M as Xe,N as Ye,k as Ze,u as xe,w as Te,H as Se}from"../chunks/scheduler.BSglW4Eu.js";import{S as Ke,i as Ae,c as k,a as v,m as y,t as m,b as _,e as w,f as et,d as se,g as re}from"../chunks/index.B6nwG8t1.js";import{T as Ie,e as x}from"../chunks/UnderConstruction.svelte_svelte_type_style_lang.C1ZryWqR.js";import{A as Z,f as te,G as tt,a as De,S as nt,$ as st,H as ke,K as rt}from"../chunks/Store.CTd4Mu2p.js";import"../chunks/Role.svelte_svelte_type_style_lang.CkTYuCET.js";import{B as fe,I as Ee}from"../chunks/Icon.BqMCh1x7.js";import{L as ve}from"../chunks/Label.zwdWYNtQ.js";import{S as at}from"../chunks/Select.Nl2qUGFb.js";import{S as ze}from"../chunks/Spacer.KOUuNspR.js";/* empty css                                                       */import"../chunks/entry.Dg0HDiL8.js";import{S as lt}from"../chunks/SettingSection.CB9nSmdZ.js";/* empty css                                                    */import{K as it}from"../chunks/KeyboardListener.DsgAzYZ5.js";function ot(r){let e;return{c(){e=ce(r[0])},l(n){e=$e(n,r[0])},m(n,t){F(n,e,t)},p(n,t){t&1&&ue(e,n[0])},d(n){n&&S(e)}}}function ft(r){let e,n,t,s;const l=r[1].default,i=Oe(l,r,r[2],null);return t=new Ie({props:{$$slots:{default:[ot]},$$scope:{ctx:r}}}),{c(){e=q("div"),i&&i.c(),n=I(),k(t.$$.fragment),this.h()},l(a){e=C(a,"DIV",{class:!0});var o=H(e);i&&i.l(o),n=D(o),v(t.$$.fragment,o),o.forEach(S),this.h()},h(){z(e,"class","banner svelte-16dgsgs")},m(a,o){F(a,e,o),i&&i.m(e,null),b(e,n),y(t,e,null),s=!0},p(a,[o]){i&&i.p&&(!s||o&4)&&Qe(i,l,a,a[2],s?We(l,a[2],o,null):Re(a[2]),null);const d={};o&5&&(d.$$scope={dirty:o,ctx:a}),t.$set(d)},i(a){s||(m(i,a),m(t.$$.fragment,a),s=!0)},o(a){_(i,a),_(t.$$.fragment,a),s=!1},d(a){a&&S(e),i&&i.d(a),w(t)}}}function ct(r,e,n){let{$$slots:t={},$$scope:s}=e,{text:l=""}=e;return r.$$set=i=>{"text"in i&&n(0,l=i.text),"$$scope"in i&&n(2,s=i.$$scope)},[l,t,s]}class $t extends Ke{constructor(e){super(),Ae(this,e,ct,ft,we,{text:0})}}function ut(r){let e,n,t;return{c(){e=q("div"),n=q("span"),t=ce(r[0]),this.h()},l(s){e=C(s,"DIV",{class:!0});var l=H(e);n=C(l,"SPAN",{class:!0});var i=H(n);t=$e(i,r[0]),i.forEach(S),l.forEach(S),this.h()},h(){z(n,"class","svelte-1v6pcan"),z(e,"class","key svelte-1v6pcan")},m(s,l){F(s,e,l),b(e,n),b(n,t)},p(s,[l]){l&1&&ue(t,s[0])},i:ne,o:ne,d(s){s&&S(e)}}}function mt(r,e,n){let{character:t="A"}=e;return r.$$set=s=>{"character"in s&&n(0,t=s.character)},[t]}class ae extends Ke{constructor(e){super(),Ae(this,e,mt,ut,we,{character:0})}}function Pe(r,e,n){const t=r.slice();return t[12]=e[n],t}function qe(r,e,n){const t=r.slice();return t[15]=e[n],t}function Ce(r,e,n){const t=r.slice();return t[15]=e[n],t}function gt(r){let e,n;return e=new Ee({props:{icon:De.Info,size:nt.Large}}),{c(){k(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,s){y(e,t,s),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function _t(r){let e=r[3]("settings.keybinds.instructions")+"",n;return{c(){n=ce(e)},l(t){n=$e(t,e)},m(t,s){F(t,n,s)},p(t,s){s&8&&e!==(e=t[3]("settings.keybinds.instructions")+"")&&ue(n,e)},d(t){t&&S(n)}}}function dt(r){let e,n;return e=new ae({props:{character:r[3]("settings.keybinds.pressAKey")}}),{c(){k(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,s){y(e,t,s),n=!0},p(t,s){const l={};s&8&&(l.character=t[3]("settings.keybinds.pressAKey")),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function pt(r){let e,n,t,s=x(r[1].modifiers),l=[];for(let a=0;a<s.length;a+=1)l[a]=He(Ce(r,s,a));const i=a=>_(l[a],1,1,()=>{l[a]=null});return n=new ae({props:{character:r[1].key}}),{c(){for(let a=0;a<l.length;a+=1)l[a].c();e=I(),k(n.$$.fragment)},l(a){for(let o=0;o<l.length;o+=1)l[o].l(a);e=D(a),v(n.$$.fragment,a)},m(a,o){for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(a,o);F(a,e,o),y(n,a,o),t=!0},p(a,o){if(o&2){s=x(a[1].modifiers);let p;for(p=0;p<s.length;p+=1){const T=Ce(a,s,p);l[p]?(l[p].p(T,o),m(l[p],1)):(l[p]=He(T),l[p].c(),m(l[p],1),l[p].m(e.parentNode,e))}for(re(),p=s.length;p<l.length;p+=1)i(p);se()}const d={};o&2&&(d.character=a[1].key),n.$set(d)},i(a){if(!t){for(let o=0;o<s.length;o+=1)m(l[o]);m(n.$$.fragment,a),t=!0}},o(a){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)_(l[o]);_(n.$$.fragment,a),t=!1},d(a){a&&S(e),Se(l,a),w(n,a)}}}function He(r){let e,n;return e=new ae({props:{character:r[15]}}),{c(){k(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,s){y(e,t,s),n=!0},p(t,s){const l={};s&2&&(l.character=t[15]),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ht(r){let e,n;return e=new Ee({props:{icon:De.UTurn}}),{c(){k(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,s){y(e,t,s),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function bt(r){let e,n;return e=new fe({props:{appearance:Z.Alt,text:r[3]("settings.keybinds.revert_plural"),$$slots:{default:[ht]},$$scope:{ctx:r}}}),e.$on("click",r[10]),{c(){k(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,s){y(e,t,s),n=!0},p(t,s){const l={};s&8&&(l.text=t[3]("settings.keybinds.revert_plural")),s&1048576&&(l.$$scope={dirty:s,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ue(r){let e,n,t=x(r[0]),s=[];for(let i=0;i<t.length;i+=1)s[i]=Ge(Pe(r,t,i));const l=i=>_(s[i],1,1,()=>{s[i]=null});return{c(){for(let i=0;i<s.length;i+=1)s[i].c();e=Te()},l(i){for(let a=0;a<s.length;a+=1)s[a].l(i);e=Te()},m(i,a){for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(i,a);F(i,e,a),n=!0},p(i,a){if(a&67){t=x(i[0]);let o;for(o=0;o<t.length;o+=1){const d=Pe(i,t,o);s[o]?(s[o].p(d,a),m(s[o],1)):(s[o]=Ge(d),s[o].c(),m(s[o],1),s[o].m(e.parentNode,e))}for(re(),o=t.length;o<s.length;o+=1)l(o);se()}},i(i){if(!n){for(let a=0;a<t.length;a+=1)m(s[a]);n=!0}},o(i){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)_(s[a]);n=!1},d(i){i&&S(e),Se(s,i)}}}function kt(r){let e=r[12].action+"",n;return{c(){n=ce(e)},l(t){n=$e(t,e)},m(t,s){F(t,n,s)},p(t,s){s&1&&e!==(e=t[12].action+"")&&ue(n,e)},d(t){t&&S(n)}}}function je(r){let e,n;return e=new ae({props:{character:r[15]}}),{c(){k(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,s){y(e,t,s),n=!0},p(t,s){const l={};s&1&&(l.character=t[15]),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function vt(r){let e,n;return e=new Ee({props:{icon:De.UTurn}}),{c(){k(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,s){y(e,t,s),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ge(r){let e,n,t,s,l,i,a,o,d,p,T,E;n=new Ie({props:{$$slots:{default:[kt]},$$scope:{ctx:r}}}),i=new ae({props:{character:r[12].key}});let V=x(r[12].modifiers),g=[];for(let c=0;c<V.length;c+=1)g[c]=je(qe(r,V,c));const h=c=>_(g[c],1,1,()=>{g[c]=null});function B(...c){return r[11](r[12],...c)}return d=new fe({props:{icon:!0,appearance:Z.Alt,$$slots:{default:[vt]},$$scope:{ctx:r}}}),d.$on("click",B),{c(){e=q("div"),k(n.$$.fragment),t=I(),s=q("div"),l=q("div"),k(i.$$.fragment),a=I();for(let c=0;c<g.length;c+=1)g[c].c();o=I(),k(d.$$.fragment),p=I(),this.h()},l(c){e=C(c,"DIV",{class:!0});var u=H(e);v(n.$$.fragment,u),t=D(u),s=C(u,"DIV",{class:!0});var N=H(s);l=C(N,"DIV",{class:!0});var L=H(l);v(i.$$.fragment,L),a=D(L);for(let M=0;M<g.length;M+=1)g[M].l(L);L.forEach(S),o=D(N),v(d.$$.fragment,N),N.forEach(S),p=D(u),u.forEach(S),this.h()},h(){z(l,"class","binding svelte-mm1y1w"),z(s,"class","controls svelte-mm1y1w"),z(e,"class",T="keybind "+(ye(r[1],r[12])?"highlight":"")+" svelte-mm1y1w")},m(c,u){F(c,e,u),y(n,e,null),b(e,t),b(e,s),b(s,l),y(i,l,null),b(l,a);for(let N=0;N<g.length;N+=1)g[N]&&g[N].m(l,null);b(s,o),y(d,s,null),b(e,p),E=!0},p(c,u){r=c;const N={};u&1048577&&(N.$$scope={dirty:u,ctx:r}),n.$set(N);const L={};if(u&1&&(L.character=r[12].key),i.$set(L),u&1){V=x(r[12].modifiers);let A;for(A=0;A<V.length;A+=1){const P=qe(r,V,A);g[A]?(g[A].p(P,u),m(g[A],1)):(g[A]=je(P),g[A].c(),m(g[A],1),g[A].m(l,null))}for(re(),A=V.length;A<g.length;A+=1)h(A);se()}const M={};u&1048576&&(M.$$scope={dirty:u,ctx:r}),d.$set(M),(!E||u&3&&T!==(T="keybind "+(ye(r[1],r[12])?"highlight":"")+" svelte-mm1y1w"))&&z(e,"class",T)},i(c){if(!E){m(n.$$.fragment,c),m(i.$$.fragment,c);for(let u=0;u<V.length;u+=1)m(g[u]);m(d.$$.fragment,c),E=!0}},o(c){_(n.$$.fragment,c),_(i.$$.fragment,c),g=g.filter(Boolean);for(let u=0;u<g.length;u+=1)_(g[u]);_(d.$$.fragment,c),E=!1},d(c){c&&S(e),w(n),w(i),Se(g,c),w(d)}}}function yt(r){let e,n,t,s,l,i,a,o,d,p,T,E,V,g,h,B,c,u,N,L,M,A,P,me,ge,R,j,_e,G,de,W,pe,J,he,le;n=new it({}),n.$on("event",r[7]),s=new $t({props:{text:r[3]("settings.keybinds.banner"),$$slots:{default:[gt]},$$scope:{ctx:r}}}),i=new ze({}),o=new ve({props:{text:r[3]("settings.keybinds.recordKeybind")}}),p=new Ie({props:{$$slots:{default:[_t]},$$scope:{ctx:r}}}),g=new ve({props:{text:r[3]("settings.keybinds.recordedKeys")}});const Ve=[pt,dt],O=[];function Be(f,$){return f[1].key?0:1}c=Be(r),u=O[c]=Ve[c](r),M=new ve({props:{text:r[3]("settings.keybinds.action")}});function Je(f){r[8](f)}let Ne={alt:!0,options:r[0].map(Fe)};r[2]!==void 0&&(Ne.selected=r[2]),P=new at({props:Ne}),Xe.push(()=>et(P,"selected",Je)),j=new fe({props:{text:r[3]("generic.save"),disabled:r[1].key==="",appearance:r[1].key!==""?Z.Success:Z.Alt}}),j.$on("click",r[5]),G=new fe({props:{text:r[3]("generic.cancel"),appearance:Z.Alt}}),G.$on("click",r[9]),W=new ze({}),J=new lt({props:{name:r[3]("settings.keybinds.revert"),description:r[3]("settings.keybinds.revertDescription"),$$slots:{default:[bt]},$$scope:{ctx:r}}});let K=r[0]&&Ue(r);return{c(){e=q("div"),k(n.$$.fragment),t=I(),k(s.$$.fragment),l=I(),k(i.$$.fragment),a=I(),k(o.$$.fragment),d=I(),k(p.$$.fragment),T=I(),E=q("div"),V=q("div"),k(g.$$.fragment),h=I(),B=q("div"),u.c(),N=I(),L=q("div"),k(M.$$.fragment),A=I(),k(P.$$.fragment),ge=I(),R=q("div"),k(j.$$.fragment),_e=I(),k(G.$$.fragment),de=I(),k(W.$$.fragment),pe=I(),k(J.$$.fragment),he=I(),K&&K.c(),this.h()},l(f){e=C(f,"DIV",{id:!0,class:!0});var $=H(e);v(n.$$.fragment,$),t=D($),v(s.$$.fragment,$),l=D($),v(i.$$.fragment,$),a=D($),v(o.$$.fragment,$),d=D($),v(p.$$.fragment,$),T=D($),E=C($,"DIV",{class:!0});var U=H(E);V=C(U,"DIV",{class:!0});var X=H(V);v(g.$$.fragment,X),h=D(X),B=C(X,"DIV",{class:!0});var ee=H(B);u.l(ee),ee.forEach(S),X.forEach(S),N=D(U),L=C(U,"DIV",{class:!0});var Y=H(L);v(M.$$.fragment,Y),A=D(Y),v(P.$$.fragment,Y),Y.forEach(S),ge=D(U),R=C(U,"DIV",{});var Q=H(R);v(j.$$.fragment,Q),_e=D(Q),v(G.$$.fragment,Q),Q.forEach(S),U.forEach(S),de=D($),v(W.$$.fragment,$),pe=D($),v(J.$$.fragment,$),he=D($),K&&K.l($),$.forEach(S),this.h()},h(){z(B,"class","binding svelte-mm1y1w"),z(V,"class","recorded-keys svelte-mm1y1w"),z(L,"class","action svelte-mm1y1w"),z(E,"class","new-keybind svelte-mm1y1w"),z(e,"id","page"),z(e,"class","svelte-mm1y1w")},m(f,$){F(f,e,$),y(n,e,null),b(e,t),y(s,e,null),b(e,l),y(i,e,null),b(e,a),y(o,e,null),b(e,d),y(p,e,null),b(e,T),b(e,E),b(E,V),y(g,V,null),b(V,h),b(V,B),O[c].m(B,null),b(E,N),b(E,L),y(M,L,null),b(L,A),y(P,L,null),b(E,ge),b(E,R),y(j,R,null),b(R,_e),y(G,R,null),b(e,de),y(W,e,null),b(e,pe),y(J,e,null),b(e,he),K&&K.m(e,null),le=!0},p(f,[$]){const U={};$&8&&(U.text=f[3]("settings.keybinds.banner")),$&1048576&&(U.$$scope={dirty:$,ctx:f}),s.$set(U);const X={};$&8&&(X.text=f[3]("settings.keybinds.recordKeybind")),o.$set(X);const ee={};$&1048584&&(ee.$$scope={dirty:$,ctx:f}),p.$set(ee);const Y={};$&8&&(Y.text=f[3]("settings.keybinds.recordedKeys")),g.$set(Y);let Q=c;c=Be(f),c===Q?O[c].p(f,$):(re(),_(O[Q],1,1,()=>{O[Q]=null}),se(),u=O[c],u?u.p(f,$):(u=O[c]=Ve[c](f),u.c()),m(u,1),u.m(B,null));const Le={};$&8&&(Le.text=f[3]("settings.keybinds.action")),M.$set(Le);const be={};$&1&&(be.options=f[0].map(Fe)),!me&&$&4&&(me=!0,be.selected=f[2],Ye(()=>me=!1)),P.$set(be);const ie={};$&8&&(ie.text=f[3]("generic.save")),$&2&&(ie.disabled=f[1].key===""),$&2&&(ie.appearance=f[1].key!==""?Z.Success:Z.Alt),j.$set(ie);const Me={};$&8&&(Me.text=f[3]("generic.cancel")),G.$set(Me);const oe={};$&8&&(oe.name=f[3]("settings.keybinds.revert")),$&8&&(oe.description=f[3]("settings.keybinds.revertDescription")),$&1048584&&(oe.$$scope={dirty:$,ctx:f}),J.$set(oe),f[0]?K?(K.p(f,$),$&1&&m(K,1)):(K=Ue(f),K.c(),m(K,1),K.m(e,null)):K&&(re(),_(K,1,1,()=>{K=null}),se())},i(f){le||(m(n.$$.fragment,f),m(s.$$.fragment,f),m(i.$$.fragment,f),m(o.$$.fragment,f),m(p.$$.fragment,f),m(g.$$.fragment,f),m(u),m(M.$$.fragment,f),m(P.$$.fragment,f),m(j.$$.fragment,f),m(G.$$.fragment,f),m(W.$$.fragment,f),m(J.$$.fragment,f),m(K),le=!0)},o(f){_(n.$$.fragment,f),_(s.$$.fragment,f),_(i.$$.fragment,f),_(o.$$.fragment,f),_(p.$$.fragment,f),_(g.$$.fragment,f),_(u),_(M.$$.fragment,f),_(P.$$.fragment,f),_(j.$$.fragment,f),_(G.$$.fragment,f),_(W.$$.fragment,f),_(J.$$.fragment,f),_(K),le=!1},d(f){f&&S(e),w(n),w(s),w(i),w(o),w(p),w(g),O[c].d(),w(M),w(P),w(j),w(G),w(W),w(J),K&&K.d()}}}function ye(r,e){if(r.key!==e.key)return!1;const n=new Set([...r.modifiers,...e.modifiers]);for(let t of n)if(r.modifiers.includes(t)!==e.modifiers.includes(t))return!1;return!0}const Fe=r=>({text:r.action.toString(),value:r.action.toString()});function wt(r,e,n){let t;Ze(r,st,h=>n(3,t=h));let s=xe(te.state),l=ke,i=tt.ToggleMute,a={key:"",modifiers:[]};te.state.subscribe(h=>{n(0,l=h.keybinds),h=h});function o(){const h=l.map(B=>B.action===i?{action:i,key:a.key,modifiers:a.modifiers,state:rt.Pressed}:B);te.update({...s,keybinds:h}),n(1,a={key:"",modifiers:[]})}function d(h){const B=ke.find(u=>u.action===h);if(!B)return;const c=l.map(u=>u.action===h?{...B}:u);te.update({...s,keybinds:c})}const p=h=>n(1,a=h.detail);function T(h){i=h,n(2,i),n(0,l),n(1,a)}const E=h=>{n(1,a={key:"",modifiers:[]})},V=h=>{te.update({...s,keybinds:ke})},g=(h,B)=>{d(h.action)};return r.$$.update=()=>{if(r.$$.dirty&3){const h=l.find(B=>ye(a,B));h&&n(2,i=h.action)}},[l,a,i,t,s,o,d,p,T,E,V,g]}class qt extends Ke{constructor(e){super(),Ae(this,e,wt,yt,we,{})}}export{qt as component};
