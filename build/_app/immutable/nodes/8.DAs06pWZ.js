import{s as Y,e as O,c as y,b as U,f as p,l as g,i as Z,h as c,n as x,v as ee,M as te,a as A,g as B,N as re,k as ie,u as oe,K as le}from"../chunks/scheduler.BSglW4Eu.js";import{S as ne,i as se,f as me,c as w,a as S,m as D,t as E,b as V,e as M}from"../chunks/index.B6nwG8t1.js";import{B as ue}from"../chunks/Icon.BQUE2h_4.js";import"../chunks/UnderConstruction.svelte_svelte_type_style_lang.BBY_KauG.js";import{R as ce,U as z,$ as de}from"../chunks/Store.Cvqh3Vpc.js";import{a as fe}from"../chunks/Input.BsBaZZC-.js";import{L as G}from"../chunks/Label.BmCs3H85.js";/* empty css                                                       */import"../chunks/Role.svelte_svelte_type_style_lang.DA_OjoaB.js";import"../chunks/entry.CGRmQe8A.js";/* empty css                                                    */import{S as pe}from"../chunks/Slimbar.CLM6xR4k.js";function ge(a){let s,n;return{c(){s=O("div"),n=O("video"),this.h()},l(i){s=y(i,"DIV",{class:!0});var t=U(s);n=y(t,"VIDEO",{id:!0,class:!0}),U(n).forEach(p),t.forEach(p),this.h()},h(){g(n,"id","video"),g(n,"class","svelte-1jrmdf0"),g(s,"class","stream svelte-1jrmdf0")},m(i,t){Z(i,s,t),c(s,n),a[2](n)},p:x,i:x,o:x,d(i){i&&p(s),a[2](null)}}}function ve(a,s,n){let{stream:i}=s,t;async function u(){i&&t&&(n(0,t.srcObject=i,t),t.play())}ee(()=>{u()});function v(o){te[o?"unshift":"push"](()=>{t=o,n(0,t),n(1,i)})}return a.$$set=o=>{"stream"in o&&n(1,i=o.stream)},a.$$.update=()=>{a.$$.dirty&3&&t&&(n(0,t.srcObject=i,t),t.play())},[t,i,v]}class X extends ne{constructor(s){super(),se(this,s,ve,ge,Y,{stream:1})}}function $e(a){let s,n,i,t,u,v,o,l,j,K,d,P,r,f,h,q,_,H,b,I,N,k,T;n=new pe({props:{loading:he,open:a[1],activeRoute:ce.Friends}}),n.$on("toggle",a[7]),u=new G({props:{text:a[3]("settings.developer.voice.channel")}});function ae(e){a[8](e)}let J={};return a[0]!==void 0&&(J.value=a[0]),l=new fe({props:J}),te.push(()=>me(l,"value",ae)),l.$on("input",_e),d=new ue({props:{text:a[3]("settings.developer.voice.setChannel")}}),h=new G({props:{text:a[3]("settings.developer.voice.localStream")}}),_=new X({props:{stream:a[2]}}),I=new G({props:{text:a[3]("settings.developer.voice.remoteStream")}}),k=new X({props:{stream:a[4]}}),{c(){s=O("div"),w(n.$$.fragment),i=A(),t=O("div"),w(u.$$.fragment),v=A(),o=O("div"),w(l.$$.fragment),K=A(),w(d.$$.fragment),P=A(),r=O("div"),f=O("div"),w(h.$$.fragment),q=A(),w(_.$$.fragment),H=A(),b=O("div"),w(I.$$.fragment),N=A(),w(k.$$.fragment),this.h()},l(e){s=y(e,"DIV",{id:!0,class:!0});var m=U(s);S(n.$$.fragment,m),i=B(m),t=y(m,"DIV",{class:!0});var $=U(t);S(u.$$.fragment,$),v=B($),o=y($,"DIV",{class:!0});var C=U(o);S(l.$$.fragment,C),K=B(C),S(d.$$.fragment,C),C.forEach(p),P=B($),r=y($,"DIV",{class:!0});var F=U(r);f=y(F,"DIV",{class:!0});var L=U(f);S(h.$$.fragment,L),q=B(L),S(_.$$.fragment,L),L.forEach(p),H=B(F),b=y(F,"DIV",{class:!0});var R=U(b);S(I.$$.fragment,R),N=B(R),S(k.$$.fragment,R),R.forEach(p),F.forEach(p),$.forEach(p),m.forEach(p),this.h()},h(){g(o,"class","row svelte-8wb7ux"),g(f,"class","local svelte-8wb7ux"),g(b,"class","remote svelte-8wb7ux"),g(r,"class","participants svelte-8wb7ux"),g(t,"class","content svelte-8wb7ux"),g(s,"id","page"),g(s,"class","svelte-8wb7ux")},m(e,m){Z(e,s,m),D(n,s,null),c(s,i),c(s,t),D(u,t,null),c(t,v),c(t,o),D(l,o,null),c(o,K),D(d,o,null),c(t,P),c(t,r),c(r,f),D(h,f,null),c(f,q),D(_,f,null),c(r,H),c(r,b),D(I,b,null),c(b,N),D(k,b,null),T=!0},p(e,[m]){const $={};m&2&&($.open=e[1]),n.$set($);const C={};m&8&&(C.text=e[3]("settings.developer.voice.channel")),u.$set(C);const F={};!j&&m&1&&(j=!0,F.value=e[0],re(()=>j=!1)),l.$set(F);const L={};m&8&&(L.text=e[3]("settings.developer.voice.setChannel")),d.$set(L);const R={};m&8&&(R.text=e[3]("settings.developer.voice.localStream")),h.$set(R);const Q={};m&4&&(Q.stream=e[2]),_.$set(Q);const W={};m&8&&(W.text=e[3]("settings.developer.voice.remoteStream")),I.$set(W)},i(e){T||(E(n.$$.fragment,e),E(u.$$.fragment,e),E(l.$$.fragment,e),E(d.$$.fragment,e),E(h.$$.fragment,e),E(_.$$.fragment,e),E(I.$$.fragment,e),E(k.$$.fragment,e),T=!0)},o(e){V(n.$$.fragment,e),V(u.$$.fragment,e),V(l.$$.fragment,e),V(d.$$.fragment,e),V(h.$$.fragment,e),V(_.$$.fragment,e),V(I.$$.fragment,e),V(k.$$.fragment,e),T=!1},d(e){e&&p(s),M(n),M(u),M(l),M(d),M(h),M(_),M(I),M(k)}}}let he=!1;const _e=a=>{};function be(a,s,n){let i;ie(a,de,r=>n(3,i=r));let t="SHFDKLSDF",u=oe(z.state.sidebarOpen);z.state.sidebarOpen.subscribe(r=>n(1,u=r));let v,o,{audioInput:l}=s,{videoInput:j}=s;async function K(){const r={audio:{deviceId:l},video:{deviceId:j}};if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){console.error("MediaDevices API or getUserMedia is not supported in your browser.");return}try{n(2,v=await navigator.mediaDevices.getUserMedia(r))}catch(f){console.error("Accessing the microphone failed:",f)}}ee(()=>{K()}),le(()=>{v.getTracks().forEach(r=>r.stop())});const d=()=>z.toggleSidebar();function P(r){t=r,n(0,t)}return a.$$set=r=>{"audioInput"in r&&n(5,l=r.audioInput),"videoInput"in r&&n(6,j=r.videoInput)},[t,u,v,i,o,l,j,d,P]}class Ce extends ne{constructor(s){super(),se(this,s,be,$e,Y,{audioInput:5,videoInput:6})}}export{Ce as component};
