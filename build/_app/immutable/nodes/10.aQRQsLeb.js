import{s as ct,e as ee,a as T,c as te,b as ne,g as E,f as D,l as W,i as B,h as Y,t as ve,d as we,j as Ce,z as Gt,A as Xt,B as Yt,C as Ht,k as Kt,K as Jt,u as $e,w as ae,H as _e,n as P,x as De,M as Ne,N as Ve,Y as it}from"../chunks/scheduler.BSglW4Eu.js";import{S as ut,i as $t,c as v,a as w,m as C,t as u,b as _,e as S,d as K,g as J,f as Oe}from"../chunks/index.B6nwG8t1.js";import{T as Se,e as Z}from"../chunks/UnderConstruction.svelte_svelte_type_style_lang.CyzTXqp4.js";import{B as H,I as X}from"../chunks/Icon.OoOTFmHe.js";import{a as Pe}from"../chunks/Input.DMVoWPY0.js";import{S as Qt,B as Wt,R as ke,b as F,U as be,T as Zt,A as V,$ as yt,l as xt,M as ue,q as Ie,a as N,z as Le}from"../chunks/Store.DgQPVP8e.js";import{L as ce}from"../chunks/Label.D-PevjQI.js";import"../chunks/Role.svelte_svelte_type_style_lang.CtXdvqNk.js";/* empty css                                                       */import{g as Ue}from"../chunks/entry.usBnYm-u.js";import{C as en}from"../chunks/ChatPreview.BV4LeCwh.js";import{F as tn,C as nn}from"../chunks/CreateGroup.pOB-s8PF.js";import{S as rn}from"../chunks/Slimbar.BNsqgFrV.js";import{T as ln}from"../chunks/Topbar.CZjpFDed.js";import{M as on}from"../chunks/Modal.Co5IuKlW.js";import{C as _t}from"../chunks/ContextMenu.6oxGsMHE.js";import{C as sn}from"../chunks/Controls.DBW1Lyv3.js";import{P as fn}from"../chunks/ProfilePicture.C0UgCsDa.js";/* empty css                                                    */import{C as an}from"../chunks/CommonInputRules.CQUN62rL.js";const cn=l=>({}),je=l=>({});function un(l){let t=l[0].name+"",n;return{c(){n=ve(t)},l(e){n=we(e,t)},m(e,r){B(e,n,r)},p(e,r){r&1&&t!==(t=e[0].name+"")&&Ce(n,t)},d(e){e&&D(n)}}}function $n(l){let t;const n=l[1].controls,e=Gt(n,l,l[2],je);return{c(){e&&e.c()},l(r){e&&e.l(r)},m(r,s){e&&e.m(r,s),t=!0},p(r,s){e&&e.p&&(!t||s&4)&&Xt(e,n,r,r[2],t?Ht(n,r[2],s,cn):Yt(r[2]),je)},i(r){t||(u(e,r),t=!0)},o(r){_(e,r),t=!1},d(r){e&&e.d(r)}}}function _n(l){let t,n,e,r,s,a,i,c;return n=new fn({props:{id:l[0].key,size:Qt.Small,loading:l[0].loading,image:l[0].profile.photo.image,status:l[0].profile.status}}),s=new Se({props:{class:"username",singleLine:!0,loading:l[0].loading,$$slots:{default:[un]},$$scope:{ctx:l}}}),i=new sn({props:{$$slots:{default:[$n]},$$scope:{ctx:l}}}),{c(){t=ee("div"),v(n.$$.fragment),e=T(),r=ee("div"),v(s.$$.fragment),a=T(),v(i.$$.fragment),this.h()},l(f){t=te(f,"DIV",{class:!0});var $=ne(t);w(n.$$.fragment,$),e=E($),r=te($,"DIV",{class:!0});var o=ne(r);w(s.$$.fragment,o),o.forEach(D),a=E($),w(i.$$.fragment,$),$.forEach(D),this.h()},h(){W(r,"class","friend-name-container svelte-j8xri5"),W(t,"class","friend svelte-j8xri5")},m(f,$){B(f,t,$),C(n,t,null),Y(t,e),Y(t,r),C(s,r,null),Y(t,a),C(i,t,null),c=!0},p(f,[$]){const o={};$&1&&(o.id=f[0].key),$&1&&(o.loading=f[0].loading),$&1&&(o.image=f[0].profile.photo.image),$&1&&(o.status=f[0].profile.status),n.$set(o);const p={};$&1&&(p.loading=f[0].loading),$&5&&(p.$$scope={dirty:$,ctx:f}),s.$set(p);const h={};$&4&&(h.$$scope={dirty:$,ctx:f}),i.$set(h)},i(f){c||(u(n.$$.fragment,f),u(s.$$.fragment,f),u(i.$$.fragment,f),c=!0)},o(f){_(n.$$.fragment,f),_(s.$$.fragment,f),_(i.$$.fragment,f),c=!1},d(f){f&&D(t),S(n),S(s),S(i)}}}function pn(l,t,n){let{$$slots:e={},$$scope:r}=t,{friend:s=Wt}=t;return l.$$set=a=>{"friend"in a&&n(0,s=a.friend),"$$scope"in a&&n(2,r=a.$$scope)},[s,e,r]}class Re extends ut{constructor(t){super(),$t(this,t,pn,_n,ct,{friend:0})}}function ze(l,t,n){const e=l.slice();return e[73]=t[n],e}function Ge(l,t,n){const e=l.slice();return e[68]=t[n],e}function Xe(l,t,n){const e=l.slice();return e[68]=t[n],e}function Ye(l,t,n){const e=l.slice();return e[58]=t[n],e}function He(l,t,n){const e=l.slice();return e[61]=t[n],e}function Ke(l,t,n){const e=l.slice();return e[64]=t[n],e}function Je(l,t,n){const e=l.slice();return e[76]=t[n],e}function mn(l){let t,n;return t=new X({props:{icon:N.ChatPlus,alt:!0}}),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p:P,i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function gn(l){let t,n;return t=new en({props:{slot:"content",chat:l[76],loading:pt,cta:l[7]===l[76]}}),t.$on("contextmenu",function(){it(l[67])&&l[67].apply(this,arguments)}),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p(e,r){l=e;const s={};r[0]&64&&(s.chat=l[76]),r[0]&192&&(s.cta=l[7]===l[76]),t.$set(s)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function Qe(l){let t,n;function e(){return l[31](l[76])}return t=new _t({props:{items:[{id:"hide",icon:N.EyeSlash,text:l[16]("chat.hide"),appearance:V.Default,onClick:e},{id:"mark_read",icon:N.CheckMark,text:l[16]("chat.markRead"),appearance:V.Default,onClick:at}],$$slots:{content:[gn,({open:r})=>({67:r}),({open:r})=>[0,0,r?32:0]]},$$scope:{ctx:l}}}),{c(){v(t.$$.fragment)},l(r){w(t.$$.fragment,r)},m(r,s){C(t,r,s),n=!0},p(r,s){l=r;const a={};s[0]&65600&&(a.items=[{id:"hide",icon:N.EyeSlash,text:l[16]("chat.hide"),appearance:V.Default,onClick:e},{id:"mark_read",icon:N.CheckMark,text:l[16]("chat.markRead"),appearance:V.Default,onClick:at}]),s[0]&192|s[2]&131104&&(a.$$scope={dirty:s,ctx:l}),t.$set(a)},i(r){n||(u(t.$$.fragment,r),n=!0)},o(r){_(t.$$.fragment,r),n=!1},d(r){S(t,r)}}}function hn(l){let t,n,e,r,s,a,i;n=new ce({props:{text:l[16]("chat.chat_plural")}}),r=new H({props:{icon:!0,small:!0,tooltipPosition:Zt.LEFT,appearance:V.Primary,tooltip:l[16]("chat.create"),$$slots:{default:[mn]},$$scope:{ctx:l}}}),r.$on("click",l[29]);let c=Z(l[6].slice().sort(l[30])),f=[];for(let o=0;o<c.length;o+=1)f[o]=Qe(Je(l,c,o));const $=o=>_(f[o],1,1,()=>{f[o]=null});return{c(){t=ee("div"),v(n.$$.fragment),e=T(),v(r.$$.fragment),s=T();for(let o=0;o<f.length;o+=1)f[o].c();a=ae(),this.h()},l(o){t=te(o,"DIV",{class:!0});var p=ne(t);w(n.$$.fragment,p),e=E(p),w(r.$$.fragment,p),p.forEach(D),s=E(o);for(let h=0;h<f.length;h+=1)f[h].l(o);a=ae(),this.h()},h(){W(t,"class","content-header svelte-1twsfmo")},m(o,p){B(o,t,p),C(n,t,null),Y(t,e),C(r,t,null),B(o,s,p);for(let h=0;h<f.length;h+=1)f[h]&&f[h].m(o,p);B(o,a,p),i=!0},p(o,p){const h={};p[0]&65536&&(h.text=o[16]("chat.chat_plural")),n.$set(h);const I={};if(p[0]&65536&&(I.tooltip=o[16]("chat.create")),p[2]&131072&&(I.$$scope={dirty:p,ctx:o}),r.$set(I),p[0]&65728|p[2]&32){c=Z(o[6].slice().sort(o[30]));let g;for(g=0;g<c.length;g+=1){const M=Je(o,c,g);f[g]?(f[g].p(M,p),u(f[g],1)):(f[g]=Qe(M),f[g].c(),u(f[g],1),f[g].m(a.parentNode,a))}for(J(),g=c.length;g<f.length;g+=1)$(g);K()}},i(o){if(!i){u(n.$$.fragment,o),u(r.$$.fragment,o);for(let p=0;p<c.length;p+=1)u(f[p]);i=!0}},o(o){_(n.$$.fragment,o),_(r.$$.fragment,o),f=f.filter(Boolean);for(let p=0;p<f.length;p+=1)_(f[p]);i=!1},d(o){o&&(D(t),D(s),D(a)),S(n),S(r),_e(f,o)}}}function dn(l){let t,n;return t=new H({props:{appearance:V.Alt,text:l[16]("friends.all"),$$slots:{default:[kn]},$$scope:{ctx:l}}}),t.$on("click",l[33]),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p(e,r){const s={};r[0]&65536&&(s.text=e[16]("friends.all")),r[2]&131072&&(s.$$scope={dirty:r,ctx:e}),t.$set(s)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function bn(l){let t,n;return t=new H({props:{appearance:V.Alt,text:l[16]("friends.all"),$$slots:{default:[vn]},$$scope:{ctx:l}}}),t.$on("click",l[32]),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p(e,r){const s={};r[0]&65536&&(s.text=e[16]("friends.all")),r[2]&131072&&(s.$$scope={dirty:r,ctx:e}),t.$set(s)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function kn(l){let t,n;return t=new X({props:{icon:N.Users}}),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p:P,i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function vn(l){let t,n;return t=new X({props:{icon:N.Users,alt:!0}}),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p:P,i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function wn(l){let t,n;return t=new H({props:{badge:l[10].length,appearance:V.Alt,text:l[16]("friends.active"),hideTextOnMobile:!0,$$slots:{default:[Sn]},$$scope:{ctx:l}}}),t.$on("click",l[35]),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p(e,r){const s={};r[0]&1024&&(s.badge=e[10].length),r[0]&65536&&(s.text=e[16]("friends.active")),r[2]&131072&&(s.$$scope={dirty:r,ctx:e}),t.$set(s)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function Cn(l){let t,n;return t=new H({props:{badge:l[10].length,appearance:V.Primary,text:l[16]("friends.active"),hideTextOnMobile:!0,$$slots:{default:[Rn]},$$scope:{ctx:l}}}),t.$on("click",l[34]),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p(e,r){const s={};r[0]&1024&&(s.badge=e[10].length),r[0]&65536&&(s.text=e[16]("friends.active")),r[2]&131072&&(s.$$scope={dirty:r,ctx:e}),t.$set(s)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function Sn(l){let t,n;return t=new X({props:{icon:N.ArrowsLeftRight}}),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p:P,i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function Rn(l){let t,n;return t=new X({props:{icon:N.ArrowsLeftRight,alt:!0}}),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p:P,i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function qn(l){let t,n;return t=new H({props:{appearance:V.Alt,text:l[16]("friends.blocked"),hideTextOnMobile:!0,$$slots:{default:[Dn]},$$scope:{ctx:l}}}),t.$on("click",l[37]),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p(e,r){const s={};r[0]&65536&&(s.text=e[16]("friends.blocked")),r[2]&131072&&(s.$$scope={dirty:r,ctx:e}),t.$set(s)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function An(l){let t,n;return t=new H({props:{appearance:V.Primary,text:l[16]("friends.blocked"),hideTextOnMobile:!0,$$slots:{default:[In]},$$scope:{ctx:l}}}),t.$on("click",l[36]),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p(e,r){const s={};r[0]&65536&&(s.text=e[16]("friends.blocked")),r[2]&131072&&(s.$$scope={dirty:r,ctx:e}),t.$set(s)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function Dn(l){let t,n;return t=new X({props:{icon:N.NoSymbol}}),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p:P,i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function In(l){let t,n;return t=new X({props:{icon:N.NoSymbol,alt:!0}}),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p:P,i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function Un(l){let t,n,e,r,s,a,i,c,f,$;const o=[bn,dn],p=[];function h(k,z){return k[4]==="all"?0:1}t=h(l),n=p[t]=o[t](l);const I=[Cn,wn],g=[];function M(k,z){return k[4]==="active"?0:1}r=M(l),s=g[r]=I[r](l);const q=[An,qn],d=[];function R(k,z){return k[4]==="blocked"?0:1}return i=R(l),c=d[i]=q[i](l),{c(){n.c(),e=T(),s.c(),a=T(),c.c(),f=ae()},l(k){n.l(k),e=E(k),s.l(k),a=E(k),c.l(k),f=ae()},m(k,z){p[t].m(k,z),B(k,e,z),g[r].m(k,z),B(k,a,z),d[i].m(k,z),B(k,f,z),$=!0},p(k,z){let U=t;t=h(k),t===U?p[t].p(k,z):(J(),_(p[U],1,1,()=>{p[U]=null}),K(),n=p[t],n?n.p(k,z):(n=p[t]=o[t](k),n.c()),u(n,1),n.m(e.parentNode,e));let y=r;r=M(k),r===y?g[r].p(k,z):(J(),_(g[y],1,1,()=>{g[y]=null}),K(),s=g[r],s?s.p(k,z):(s=g[r]=I[r](k),s.c()),u(s,1),s.m(a.parentNode,a));let re=i;i=R(k),i===re?d[i].p(k,z):(J(),_(d[re],1,1,()=>{d[re]=null}),K(),c=d[i],c?c.p(k,z):(c=d[i]=q[i](k),c.c()),u(c,1),c.m(f.parentNode,f))},i(k){$||(u(n),u(s),u(c),$=!0)},o(k){_(n),_(s),_(c),$=!1},d(k){k&&(D(e),D(a),D(f)),p[t].d(k),g[r].d(k),d[i].d(k)}}}function Mn(l){let t,n,e,r,s;n=new ce({props:{text:l[16]("friends.blocked_users")}});let a=Z(l[17]),i=[];for(let $=0;$<a.length;$+=1)i[$]=We(ze(l,a,$));const c=$=>_(i[$],1,1,()=>{i[$]=null});let f=l[17].length===0&&Ze(l);return{c(){t=ee("div"),v(n.$$.fragment),e=T();for(let $=0;$<i.length;$+=1)i[$].c();r=T(),f&&f.c(),this.h()},l($){t=te($,"DIV",{class:!0});var o=ne(t);w(n.$$.fragment,o),e=E(o);for(let p=0;p<i.length;p+=1)i[p].l(o);r=E(o),f&&f.l(o),o.forEach(D),this.h()},h(){W(t,"class","section column svelte-1twsfmo")},m($,o){B($,t,o),C(n,t,null),Y(t,e);for(let p=0;p<i.length;p+=1)i[p]&&i[p].m(t,null);Y(t,r),f&&f.m(t,null),s=!0},p($,o){const p={};if(o[0]&65536&&(p.text=$[16]("friends.blocked_users")),n.$set(p),o[0]&33751040){a=Z($[17]);let h;for(h=0;h<a.length;h+=1){const I=ze($,a,h);i[h]?(i[h].p(I,o),u(i[h],1)):(i[h]=We(I),i[h].c(),u(i[h],1),i[h].m(t,r))}for(J(),h=a.length;h<i.length;h+=1)c(h);K()}$[17].length===0?f?(f.p($,o),o[0]&131072&&u(f,1)):(f=Ze($),f.c(),u(f,1),f.m(t,null)):f&&(J(),_(f,1,1,()=>{f=null}),K())},i($){if(!s){u(n.$$.fragment,$);for(let o=0;o<a.length;o+=1)u(i[o]);u(f),s=!0}},o($){_(n.$$.fragment,$),i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)_(i[o]);_(f),s=!1},d($){$&&D(t),S(n),_e(i,$),f&&f.d()}}}function Bn(l){let t,n,e,r,s,a,i,c,f;n=new ce({props:{text:l[16]("friends.outgoing_requests")}});let $=Z(l[9]),o=[];for(let d=0;d<$.length;d+=1)o[d]=ye(Xe(l,$,d));const p=d=>_(o[d],1,1,()=>{o[d]=null});let h=l[9].length===0&&xe(l);a=new ce({props:{text:l[16]("friends.incoming_requests")}});let I=Z(l[10]),g=[];for(let d=0;d<I.length;d+=1)g[d]=et(Ge(l,I,d));const M=d=>_(g[d],1,1,()=>{g[d]=null});let q=l[10].length===0&&tt(l);return{c(){t=ee("div"),v(n.$$.fragment),e=T();for(let d=0;d<o.length;d+=1)o[d].c();r=T(),h&&h.c(),s=T(),v(a.$$.fragment),i=T();for(let d=0;d<g.length;d+=1)g[d].c();c=T(),q&&q.c(),this.h()},l(d){t=te(d,"DIV",{class:!0});var R=ne(t);w(n.$$.fragment,R),e=E(R);for(let k=0;k<o.length;k+=1)o[k].l(R);r=E(R),h&&h.l(R),s=E(R),w(a.$$.fragment,R),i=E(R);for(let k=0;k<g.length;k+=1)g[k].l(R);c=E(R),q&&q.l(R),R.forEach(D),this.h()},h(){W(t,"class","section column svelte-1twsfmo")},m(d,R){B(d,t,R),C(n,t,null),Y(t,e);for(let k=0;k<o.length;k+=1)o[k]&&o[k].m(t,null);Y(t,r),h&&h.m(t,null),Y(t,s),C(a,t,null),Y(t,i);for(let k=0;k<g.length;k+=1)g[k]&&g[k].m(t,null);Y(t,c),q&&q.m(t,null),f=!0},p(d,R){const k={};if(R[0]&65536&&(k.text=d[16]("friends.outgoing_requests")),n.$set(k),R[0]&4260352){$=Z(d[9]);let U;for(U=0;U<$.length;U+=1){const y=Xe(d,$,U);o[U]?(o[U].p(y,R),u(o[U],1)):(o[U]=ye(y),o[U].c(),u(o[U],1),o[U].m(t,r))}for(J(),U=$.length;U<o.length;U+=1)p(U);K()}d[9].length===0?h?(h.p(d,R),R[0]&512&&u(h,1)):(h=xe(d),h.c(),u(h,1),h.m(t,s)):h&&(J(),_(h,1,1,()=>{h=null}),K());const z={};if(R[0]&65536&&(z.text=d[16]("friends.incoming_requests")),a.$set(z),R[0]&3212288){I=Z(d[10]);let U;for(U=0;U<I.length;U+=1){const y=Ge(d,I,U);g[U]?(g[U].p(y,R),u(g[U],1)):(g[U]=et(y),g[U].c(),u(g[U],1),g[U].m(t,c))}for(J(),U=I.length;U<g.length;U+=1)M(U);K()}d[10].length===0?q?(q.p(d,R),R[0]&1024&&u(q,1)):(q=tt(d),q.c(),u(q,1),q.m(t,null)):q&&(J(),_(q,1,1,()=>{q=null}),K())},i(d){if(!f){u(n.$$.fragment,d);for(let R=0;R<$.length;R+=1)u(o[R]);u(h),u(a.$$.fragment,d);for(let R=0;R<I.length;R+=1)u(g[R]);u(q),f=!0}},o(d){_(n.$$.fragment,d),o=o.filter(Boolean);for(let R=0;R<o.length;R+=1)_(o[R]);_(h),_(a.$$.fragment,d),g=g.filter(Boolean);for(let R=0;R<g.length;R+=1)_(g[R]);_(q),f=!1},d(d){d&&D(t),S(n),_e(o,d),h&&h.d(),S(a),_e(g,d),q&&q.d()}}}function Tn(l){let t,n,e,r,s,a,i,c,f,$,o,p,h,I,g,M,q,d,R,k;t=new ce({props:{text:l[16]("friends.add_someone")}});function z(m){l[38](m)}let U={alt:!0,placeholder:l[16]("friends.find_placeholder"),rules:an.friendRequestDid,$$slots:{default:[Xn]},$$scope:{ctx:l}};l[5]!==void 0&&(U.value=l[5]),r=new Pe({props:U}),Ne.push(()=>Oe(r,"value",z)),r.$on("isValid",l[39]),r.$on("enter",l[19]),i=new H({props:{disabled:!l[2],appearance:V.Alt,text:l[16]("friends.add"),$$slots:{default:[Yn]},$$scope:{ctx:l}}}),i.$on("click",l[19]),f=new _t({props:{items:[{id:"copy-id",icon:N.Users,text:l[16]("settings.profile.copy_id"),appearance:V.Default,onClick:l[41]},{id:"copy-did",icon:N.Clipboard,text:l[16]("settings.profile.copy_did"),appearance:V.Default,onClick:l[42]}],$$slots:{content:[Kn,({open:m})=>({67:m}),({open:m})=>[0,0,m?32:0]]},$$scope:{ctx:l}}}),o=new ce({props:{text:l[16]("friends.search_friends_placeholder")}});function y(m){l[43](m)}let re={alt:!0,placeholder:l[16]("friends.search_friends_placeholder"),$$slots:{default:[Jn]},$$scope:{ctx:l}};l[0]!==void 0&&(re.value=l[0]),I=new Pe({props:re}),Ne.push(()=>Oe(I,"value",y));let L=(l[8].length||l[0].length)&&nt(l),Q=Z(Object.keys(ge(l[1])).sort()),O=[];for(let m=0;m<Q.length;m+=1)O[m]=st(Ye(l,Q,m));const Me=m=>_(O[m],1,1,()=>{O[m]=null});return{c(){v(t.$$.fragment),n=T(),e=ee("div"),v(r.$$.fragment),a=T(),v(i.$$.fragment),c=T(),v(f.$$.fragment),$=T(),v(o.$$.fragment),p=T(),h=ee("div"),v(I.$$.fragment),M=T(),L&&L.c(),q=T(),d=ee("div"),R=ee("div");for(let m=0;m<O.length;m+=1)O[m].c();this.h()},l(m){w(t.$$.fragment,m),n=E(m),e=te(m,"DIV",{class:!0});var A=ne(e);w(r.$$.fragment,A),a=E(A),w(i.$$.fragment,A),c=E(A),w(f.$$.fragment,A),A.forEach(D),$=E(m),w(o.$$.fragment,m),p=E(m),h=te(m,"DIV",{class:!0});var x=ne(h);w(I.$$.fragment,x),x.forEach(D),M=E(m),L&&L.l(m),q=E(m),d=te(m,"DIV",{class:!0});var se=ne(d);R=te(se,"DIV",{class:!0});var fe=ne(R);for(let le=0;le<O.length;le+=1)O[le].l(fe);fe.forEach(D),se.forEach(D),this.h()},h(){W(e,"class","section svelte-1twsfmo"),W(h,"class","section svelte-1twsfmo"),W(R,"class","friends-section section column svelte-1twsfmo"),W(d,"class","test svelte-1twsfmo")},m(m,A){C(t,m,A),B(m,n,A),B(m,e,A),C(r,e,null),Y(e,a),C(i,e,null),Y(e,c),C(f,e,null),B(m,$,A),C(o,m,A),B(m,p,A),B(m,h,A),C(I,h,null),B(m,M,A),L&&L.m(m,A),B(m,q,A),B(m,d,A),Y(d,R);for(let x=0;x<O.length;x+=1)O[x]&&O[x].m(R,null);k=!0},p(m,A){const x={};A[0]&65536&&(x.text=m[16]("friends.add_someone")),t.$set(x);const se={};A[0]&65536&&(se.placeholder=m[16]("friends.find_placeholder")),A[2]&131072&&(se.$$scope={dirty:A,ctx:m}),!s&&A[0]&32&&(s=!0,se.value=m[5],Ve(()=>s=!1)),r.$set(se);const fe={};A[0]&4&&(fe.disabled=!m[2]),A[0]&65536&&(fe.text=m[16]("friends.add")),A[2]&131072&&(fe.$$scope={dirty:A,ctx:m}),i.$set(fe);const le={};A[0]&65536&&(le.items=[{id:"copy-id",icon:N.Users,text:m[16]("settings.profile.copy_id"),appearance:V.Default,onClick:m[41]},{id:"copy-did",icon:N.Clipboard,text:m[16]("settings.profile.copy_did"),appearance:V.Default,onClick:m[42]}]),A[0]&65536|A[2]&131104&&(le.$$scope={dirty:A,ctx:m}),f.$set(le);const pe={};A[0]&65536&&(pe.text=m[16]("friends.search_friends_placeholder")),o.$set(pe);const ie={};if(A[0]&65536&&(ie.placeholder=m[16]("friends.search_friends_placeholder")),A[2]&131072&&(ie.$$scope={dirty:A,ctx:m}),!g&&A[0]&1&&(g=!0,ie.value=m[0],Ve(()=>g=!1)),I.$set(ie),m[8].length||m[0].length?L?(L.p(m,A),A[0]&257&&u(L,1)):(L=nt(m),L.c(),u(L,1),L.m(q.parentNode,q)):L&&(J(),_(L,1,1,()=>{L=null}),K()),A[0]&25231362){Q=Z(Object.keys(ge(m[1])).sort());let G;for(G=0;G<Q.length;G+=1){const qe=Ye(m,Q,G);O[G]?(O[G].p(qe,A),u(O[G],1)):(O[G]=st(qe),O[G].c(),u(O[G],1),O[G].m(R,null))}for(J(),G=Q.length;G<O.length;G+=1)Me(G);K()}},i(m){if(!k){u(t.$$.fragment,m),u(r.$$.fragment,m),u(i.$$.fragment,m),u(f.$$.fragment,m),u(o.$$.fragment,m),u(I.$$.fragment,m),u(L);for(let A=0;A<Q.length;A+=1)u(O[A]);k=!0}},o(m){_(t.$$.fragment,m),_(r.$$.fragment,m),_(i.$$.fragment,m),_(f.$$.fragment,m),_(o.$$.fragment,m),_(I.$$.fragment,m),_(L),O=O.filter(Boolean);for(let A=0;A<O.length;A+=1)_(O[A]);k=!1},d(m){m&&(D(n),D(e),D($),D(p),D(h),D(M),D(q),D(d)),S(t,m),S(r),S(i),S(f),S(o,m),S(I),L&&L.d(m),_e(O,m)}}}function En(l){let t,n;return t=new X({props:{icon:N.NoSymbol}}),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p:P,i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function Fn(l){let t,n;function e(...r){return l[53](l[73],...r)}return t=new H({props:{appearance:V.Alt,text:l[16]("friends.unblock"),$$slots:{default:[En]},$$scope:{ctx:l}}}),t.$on("click",e),{c(){v(t.$$.fragment)},l(r){w(t.$$.fragment,r)},m(r,s){C(t,r,s),n=!0},p(r,s){l=r;const a={};s[0]&65536&&(a.text=l[16]("friends.unblock")),s[2]&131072&&(a.$$scope={dirty:s,ctx:l}),t.$set(a)},i(r){n||(u(t.$$.fragment,r),n=!0)},o(r){_(t.$$.fragment,r),n=!1},d(r){S(t,r)}}}function We(l){let t,n;return t=new Re({props:{friend:l[73],$$slots:{controls:[Fn]},$$scope:{ctx:l}}}),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p(e,r){const s={};r[0]&131072&&(s.friend=e[73]),r[0]&196608|r[2]&131072&&(s.$$scope={dirty:r,ctx:e}),t.$set(s)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function Ze(l){let t,n;return t=new Se({props:{$$slots:{default:[Nn]},$$scope:{ctx:l}}}),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p(e,r){const s={};r[0]&65536|r[2]&131072&&(s.$$scope={dirty:r,ctx:e}),t.$set(s)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function Nn(l){let t=l[16]("friends.noBlocked")+"",n;return{c(){n=ve(t)},l(e){n=we(e,t)},m(e,r){B(e,n,r)},p(e,r){r[0]&65536&&t!==(t=e[16]("friends.noBlocked")+"")&&Ce(n,t)},d(e){e&&D(n)}}}function Vn(l){let t,n;return t=new X({props:{icon:N.NoSymbol}}),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p:P,i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function On(l){let t,n;function e(...r){return l[50](l[68],...r)}return t=new H({props:{appearance:V.Alt,text:l[16]("generic.cancel"),$$slots:{default:[Vn]},$$scope:{ctx:l}}}),t.$on("click",e),{c(){v(t.$$.fragment)},l(r){w(t.$$.fragment,r)},m(r,s){C(t,r,s),n=!0},p(r,s){l=r;const a={};s[0]&65536&&(a.text=l[16]("generic.cancel")),s[2]&131072&&(a.$$scope={dirty:s,ctx:l}),t.$set(a)},i(r){n||(u(t.$$.fragment,r),n=!0)},o(r){_(t.$$.fragment,r),n=!1},d(r){S(t,r)}}}function ye(l){let t,n;return t=new Re({props:{friend:$e(F.getUser(l[68].to)),$$slots:{controls:[On]},$$scope:{ctx:l}}}),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p(e,r){const s={};r[0]&512&&(s.friend=$e(F.getUser(e[68].to))),r[0]&66048|r[2]&131072&&(s.$$scope={dirty:r,ctx:e}),t.$set(s)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function xe(l){let t,n;return t=new Se({props:{$$slots:{default:[Pn]},$$scope:{ctx:l}}}),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p(e,r){const s={};r[0]&65536|r[2]&131072&&(s.$$scope={dirty:r,ctx:e}),t.$set(s)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function Pn(l){let t=l[16]("friends.noOutgoing")+"",n;return{c(){n=ve(t)},l(e){n=we(e,t)},m(e,r){B(e,n,r)},p(e,r){r[0]&65536&&t!==(t=e[16]("friends.noOutgoing")+"")&&Ce(n,t)},d(e){e&&D(n)}}}function Ln(l){let t,n;return t=new X({props:{icon:N.CheckMark}}),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p:P,i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function jn(l){let t,n;return t=new X({props:{icon:N.XMark}}),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p:P,i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function zn(l){let t,n,e,r;function s(...i){return l[51](l[68],...i)}t=new H({props:{appearance:V.Success,text:l[16]("generic.accept"),$$slots:{default:[Ln]},$$scope:{ctx:l}}}),t.$on("click",s);function a(...i){return l[52](l[68],...i)}return e=new H({props:{appearance:V.Alt,text:l[16]("generic.deny"),$$slots:{default:[jn]},$$scope:{ctx:l}}}),e.$on("click",a),{c(){v(t.$$.fragment),n=T(),v(e.$$.fragment)},l(i){w(t.$$.fragment,i),n=E(i),w(e.$$.fragment,i)},m(i,c){C(t,i,c),B(i,n,c),C(e,i,c),r=!0},p(i,c){l=i;const f={};c[0]&65536&&(f.text=l[16]("generic.accept")),c[2]&131072&&(f.$$scope={dirty:c,ctx:l}),t.$set(f);const $={};c[0]&65536&&($.text=l[16]("generic.deny")),c[2]&131072&&($.$$scope={dirty:c,ctx:l}),e.$set($)},i(i){r||(u(t.$$.fragment,i),u(e.$$.fragment,i),r=!0)},o(i){_(t.$$.fragment,i),_(e.$$.fragment,i),r=!1},d(i){i&&D(n),S(t,i),S(e,i)}}}function et(l){let t,n;return t=new Re({props:{friend:$e(F.getUser(l[68].from)),$$slots:{controls:[zn]},$$scope:{ctx:l}}}),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p(e,r){const s={};r[0]&1024&&(s.friend=$e(F.getUser(e[68].from))),r[0]&66560|r[2]&131072&&(s.$$scope={dirty:r,ctx:e}),t.$set(s)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function tt(l){let t,n;return t=new Se({props:{$$slots:{default:[Gn]},$$scope:{ctx:l}}}),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p(e,r){const s={};r[0]&65536|r[2]&131072&&(s.$$scope={dirty:r,ctx:e}),t.$set(s)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function Gn(l){let t=l[16]("friends.noIncoming")+"",n;return{c(){n=ve(t)},l(e){n=we(e,t)},m(e,r){B(e,n,r)},p(e,r){r[0]&65536&&t!==(t=e[16]("friends.noIncoming")+"")&&Ce(n,t)},d(e){e&&D(n)}}}function Xn(l){let t,n;return t=new X({props:{icon:N.Search}}),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p:P,i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function Yn(l){let t,n;return t=new X({props:{icon:N.Plus}}),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p:P,i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function Hn(l){let t,n;return t=new X({props:{icon:N.Clipboard}}),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p:P,i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function Kn(l){let t,n;return t=new H({props:{slot:"content",appearance:V.Alt,icon:!0,tooltip:l[16]("friends.copy_did"),$$slots:{default:[Hn]},$$scope:{ctx:l}}}),t.$on("contextmenu",function(){it(l[67])&&l[67].apply(this,arguments)}),t.$on("click",l[40]),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p(e,r){l=e;const s={};r[0]&65536&&(s.tooltip=l[16]("friends.copy_did")),r[2]&131072&&(s.$$scope={dirty:r,ctx:l}),t.$set(s)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function Jn(l){let t,n;return t=new X({props:{icon:N.Search}}),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p:P,i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function nt(l){let t,n,e,r,s,a;n=new ce({props:{text:l[16]("generic.search_results")}});const i=[Wn,Qn],c=[];function f($,o){return $[8].length?0:1}return r=f(l),s=c[r]=i[r](l),{c(){t=ee("div"),v(n.$$.fragment),e=T(),s.c(),this.h()},l($){t=te($,"DIV",{class:!0});var o=ne(t);w(n.$$.fragment,o),e=E(o),s.l(o),o.forEach(D),this.h()},h(){W(t,"class","section column search-results svelte-1twsfmo")},m($,o){B($,t,o),C(n,t,null),Y(t,e),c[r].m(t,null),a=!0},p($,o){const p={};o[0]&65536&&(p.text=$[16]("generic.search_results")),n.$set(p);let h=r;r=f($),r===h?c[r].p($,o):(J(),_(c[h],1,1,()=>{c[h]=null}),K(),s=c[r],s?s.p($,o):(s=c[r]=i[r]($),s.c()),u(s,1),s.m(t,null))},i($){a||(u(n.$$.fragment,$),u(s),a=!0)},o($){_(n.$$.fragment,$),_(s),a=!1},d($){$&&D(t),S(n),c[r].d()}}}function Qn(l){let t,n;return t=new Se({props:{$$slots:{default:[Zn]},$$scope:{ctx:l}}}),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p(e,r){const s={};r[0]&65536|r[2]&131072&&(s.$$scope={dirty:r,ctx:e}),t.$set(s)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function Wn(l){let t,n,e=Z(l[8]),r=[];for(let a=0;a<e.length;a+=1)r[a]=rt(Ke(l,e,a));const s=a=>_(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();t=ae()},l(a){for(let i=0;i<r.length;i+=1)r[i].l(a);t=ae()},m(a,i){for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(a,i);B(a,t,i),n=!0},p(a,i){if(i[0]&25231616){e=Z(a[8]);let c;for(c=0;c<e.length;c+=1){const f=Ke(a,e,c);r[c]?(r[c].p(f,i),u(r[c],1)):(r[c]=rt(f),r[c].c(),u(r[c],1),r[c].m(t.parentNode,t))}for(J(),c=e.length;c<r.length;c+=1)s(c);K()}},i(a){if(!n){for(let i=0;i<e.length;i+=1)u(r[i]);n=!0}},o(a){r=r.filter(Boolean);for(let i=0;i<r.length;i+=1)_(r[i]);n=!1},d(a){a&&D(t),_e(r,a)}}}function Zn(l){let t=l[16]("generic.no_results")+"",n;return{c(){n=ve(t)},l(e){n=we(e,t)},m(e,r){B(e,n,r)},p(e,r){r[0]&65536&&t!==(t=e[16]("generic.no_results")+"")&&Ce(n,t)},d(e){e&&D(n)}}}function yn(l){let t,n;return t=new X({props:{icon:N.ChatBubble}}),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p:P,i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function xn(l){let t,n;return t=new X({props:{icon:N.UserMinus}}),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p:P,i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function er(l){let t,n;return t=new X({props:{icon:N.NoSymbol}}),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p:P,i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function tr(l){let t,n,e,r,s,a,i;function c(...o){return l[44](l[64],...o)}t=new H({props:{text:l[16]("chat.chat"),$$slots:{default:[yn]},$$scope:{ctx:l}}}),t.$on("click",c);function f(...o){return l[45](l[64],...o)}e=new H({props:{icon:!0,appearance:V.Alt,tooltip:l[16]("generic.remove"),$$slots:{default:[xn]},$$scope:{ctx:l}}}),e.$on("click",f);function $(...o){return l[46](l[64],...o)}return s=new H({props:{icon:!0,appearance:V.Alt,tooltip:l[16]("friends.block"),$$slots:{default:[er]},$$scope:{ctx:l}}}),s.$on("click",$),{c(){v(t.$$.fragment),n=T(),v(e.$$.fragment),r=T(),v(s.$$.fragment),a=T()},l(o){w(t.$$.fragment,o),n=E(o),w(e.$$.fragment,o),r=E(o),w(s.$$.fragment,o),a=E(o)},m(o,p){C(t,o,p),B(o,n,p),C(e,o,p),B(o,r,p),C(s,o,p),B(o,a,p),i=!0},p(o,p){l=o;const h={};p[0]&65536&&(h.text=l[16]("chat.chat")),p[2]&131072&&(h.$$scope={dirty:p,ctx:l}),t.$set(h);const I={};p[0]&65536&&(I.tooltip=l[16]("generic.remove")),p[2]&131072&&(I.$$scope={dirty:p,ctx:l}),e.$set(I);const g={};p[0]&65536&&(g.tooltip=l[16]("friends.block")),p[2]&131072&&(g.$$scope={dirty:p,ctx:l}),s.$set(g)},i(o){i||(u(t.$$.fragment,o),u(e.$$.fragment,o),u(s.$$.fragment,o),i=!0)},o(o){_(t.$$.fragment,o),_(e.$$.fragment,o),_(s.$$.fragment,o),i=!1},d(o){o&&(D(n),D(r),D(a)),S(t,o),S(e,o),S(s,o)}}}function rt(l){let t,n;return t=new Re({props:{friend:l[64].item,$$slots:{controls:[tr]},$$scope:{ctx:l}}}),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p(e,r){const s={};r[0]&256&&(s.friend=e[64].item),r[0]&65792|r[2]&131072&&(s.$$scope={dirty:r,ctx:e}),t.$set(s)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function lt(l){let t,n,e,r;t=new ce({props:{text:l[58]}});let s=Z(ge(l[1])[l[58]]),a=[];for(let c=0;c<s.length;c+=1)a[c]=ot(He(l,s,c));const i=c=>_(a[c],1,1,()=>{a[c]=null});return{c(){v(t.$$.fragment),n=T();for(let c=0;c<a.length;c+=1)a[c].c();e=ae()},l(c){w(t.$$.fragment,c),n=E(c);for(let f=0;f<a.length;f+=1)a[f].l(c);e=ae()},m(c,f){C(t,c,f),B(c,n,f);for(let $=0;$<a.length;$+=1)a[$]&&a[$].m(c,f);B(c,e,f),r=!0},p(c,f){const $={};if(f[0]&2&&($.text=c[58]),t.$set($),f[0]&25231362){s=Z(ge(c[1])[c[58]]);let o;for(o=0;o<s.length;o+=1){const p=He(c,s,o);a[o]?(a[o].p(p,f),u(a[o],1)):(a[o]=ot(p),a[o].c(),u(a[o],1),a[o].m(e.parentNode,e))}for(J(),o=s.length;o<a.length;o+=1)i(o);K()}},i(c){if(!r){u(t.$$.fragment,c);for(let f=0;f<s.length;f+=1)u(a[f]);r=!0}},o(c){_(t.$$.fragment,c),a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)_(a[f]);r=!1},d(c){c&&(D(n),D(e)),S(t,c),_e(a,c)}}}function nr(l){let t,n;return t=new X({props:{icon:N.ChatBubble,alt:!0}}),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p:P,i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function rr(l){let t,n;return t=new X({props:{icon:N.UserMinus}}),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p:P,i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function lr(l){let t,n;return t=new X({props:{icon:N.NoSymbol}}),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p:P,i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function or(l){let t,n,e,r,s,a,i;function c(...o){return l[47](l[61],...o)}t=new H({props:{appearance:V.Primary,text:l[16]("chat.chat"),$$slots:{default:[nr]},$$scope:{ctx:l}}}),t.$on("click",c);function f(...o){return l[48](l[61],...o)}e=new H({props:{icon:!0,appearance:V.Alt,tooltip:l[16]("generic.remove"),$$slots:{default:[rr]},$$scope:{ctx:l}}}),e.$on("click",f);function $(...o){return l[49](l[61],...o)}return s=new H({props:{icon:!0,appearance:V.Alt,tooltip:l[16]("friends.block"),$$slots:{default:[lr]},$$scope:{ctx:l}}}),s.$on("click",$),{c(){v(t.$$.fragment),n=T(),v(e.$$.fragment),r=T(),v(s.$$.fragment),a=T()},l(o){w(t.$$.fragment,o),n=E(o),w(e.$$.fragment,o),r=E(o),w(s.$$.fragment,o),a=E(o)},m(o,p){C(t,o,p),B(o,n,p),C(e,o,p),B(o,r,p),C(s,o,p),B(o,a,p),i=!0},p(o,p){l=o;const h={};p[0]&65536&&(h.text=l[16]("chat.chat")),p[2]&131072&&(h.$$scope={dirty:p,ctx:l}),t.$set(h);const I={};p[0]&65536&&(I.tooltip=l[16]("generic.remove")),p[2]&131072&&(I.$$scope={dirty:p,ctx:l}),e.$set(I);const g={};p[0]&65536&&(g.tooltip=l[16]("friends.block")),p[2]&131072&&(g.$$scope={dirty:p,ctx:l}),s.$set(g)},i(o){i||(u(t.$$.fragment,o),u(e.$$.fragment,o),u(s.$$.fragment,o),i=!0)},o(o){_(t.$$.fragment,o),_(e.$$.fragment,o),_(s.$$.fragment,o),i=!1},d(o){o&&(D(n),D(r),D(a)),S(t,o),S(e,o),S(s,o)}}}function ot(l){let t,n;return t=new Re({props:{friend:l[61],$$slots:{controls:[or]},$$scope:{ctx:l}}}),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p(e,r){const s={};r[0]&2&&(s.friend=e[61]),r[0]&65538|r[2]&131072&&(s.$$scope={dirty:r,ctx:e}),t.$set(s)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function st(l){let t=ge(l[1])[l[58]].length>0,n,e,r=t&&lt(l);return{c(){r&&r.c(),n=ae()},l(s){r&&r.l(s),n=ae()},m(s,a){r&&r.m(s,a),B(s,n,a),e=!0},p(s,a){a[0]&2&&(t=ge(s[1])[s[58]].length>0),t?r?(r.p(s,a),a[0]&2&&u(r,1)):(r=lt(s),r.c(),u(r,1),r.m(n.parentNode,n)):r&&(J(),_(r,1,1,()=>{r=null}),K())},i(s){e||(u(r),e=!0)},o(s){_(r),e=!1},d(s){s&&D(n),r&&r.d(s)}}}function ft(l){let t,n;return t=new on({props:{$$slots:{default:[sr]},$$scope:{ctx:l}}}),t.$on("close",l[55]),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p(e,r){const s={};r[0]&8|r[2]&131072&&(s.$$scope={dirty:r,ctx:e}),t.$set(s)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function sr(l){let t,n;return t=new nn({}),t.$on("create",l[54]),{c(){v(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p:P,i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function fr(l){let t,n,e,r,s,a,i,c,f,$,o;n=new rn({props:{loading:pt,open:l[15],activeRoute:ke.Friends,$$slots:{default:[hn]},$$scope:{ctx:l}}}),n.$on("toggle",l[18]),s=new ln({props:{$$slots:{controls:[Un]},$$scope:{ctx:l}}});const p=[Tn,Bn,Mn],h=[];function I(M,q){return M[4]==="all"?0:M[4]==="active"?1:M[4]==="blocked"?2:-1}~(c=I(l))&&(f=h[c]=p[c](l));let g=l[3]&&ft(l);return{c(){t=ee("div"),v(n.$$.fragment),e=T(),r=ee("div"),v(s.$$.fragment),a=T(),i=ee("div"),f&&f.c(),$=T(),g&&g.c(),this.h()},l(M){t=te(M,"DIV",{id:!0,class:!0});var q=ne(t);w(n.$$.fragment,q),e=E(q),r=te(q,"DIV",{class:!0});var d=ne(r);w(s.$$.fragment,d),a=E(d),i=te(d,"DIV",{class:!0});var R=ne(i);f&&f.l(R),R.forEach(D),d.forEach(D),$=E(q),g&&g.l(q),q.forEach(D),this.h()},h(){W(i,"class","body svelte-1twsfmo"),W(r,"class","content svelte-1twsfmo"),W(t,"id","page"),W(t,"class","svelte-1twsfmo")},m(M,q){B(M,t,q),C(n,t,null),Y(t,e),Y(t,r),C(s,r,null),Y(r,a),Y(r,i),~c&&h[c].m(i,null),Y(t,$),g&&g.m(t,null),o=!0},p(M,q){const d={};q[0]&32768&&(d.open=M[15]),q[0]&65736|q[2]&131072&&(d.$$scope={dirty:q,ctx:M}),n.$set(d);const R={};q[0]&66576|q[2]&131072&&(R.$$scope={dirty:q,ctx:M}),s.$set(R);let k=c;c=I(M),c===k?~c&&h[c].p(M,q):(f&&(J(),_(h[k],1,1,()=>{h[k]=null}),K()),~c?(f=h[c],f?f.p(M,q):(f=h[c]=p[c](M),f.c()),u(f,1),f.m(i,null)):f=null),M[3]?g?(g.p(M,q),q[0]&8&&u(g,1)):(g=ft(M),g.c(),u(g,1),g.m(t,null)):g&&(J(),_(g,1,1,()=>{g=null}),K())},i(M){o||(u(n.$$.fragment,M),u(s.$$.fragment,M),u(f),u(g),o=!0)},o(M){_(n.$$.fragment,M),_(s.$$.fragment,M),_(f),_(g),o=!1},d(M){M&&D(t),S(n),S(s),~c&&h[c].d(),g&&g.d()}}}let pt=!1;function ge(l){const t={};return l.forEach(n=>{const e=n.name.charAt(0).toUpperCase();t[e]||(t[e]=[]),t[e].push(n)}),t}const at=()=>{};function ar(l,t,n){let e,r,s,a,i,c,f,$,o,p=P,h=()=>(p(),p=De(r,b=>n(1,o=b)),r),I,g=P,M=()=>(g(),g=De(a,b=>n(28,I=b)),a),q,d=P,R=()=>(d(),d=De(e,b=>n(15,q=b)),e),k,z,U=P,y=()=>(U(),U=De(s,b=>n(17,z=b)),s);Kt(l,yt,b=>n(16,k=b)),l.$$.on_destroy.push(()=>p()),l.$$.on_destroy.push(()=>g()),l.$$.on_destroy.push(()=>d()),l.$$.on_destroy.push(()=>U());let re=!1,L=!1,Q="all",O=F.state.pageState.subscribe(b=>{function j(oe){return oe==="all"||oe==="active"||oe==="blocked"}j(b)&&n(4,Q=b)});Jt(()=>{O()});function Me(){be.toggleSidebar()}let m,A=async function(){if(xt.info("Sending friend request to "+m),!re)return;(await ue.sendFriendRequest(m)).fold(j=>{n(5,m=""),F.addToastNotification(new Le("",j,3,N.XMark,V.Error))},()=>{n(5,m=""),F.addToastNotification(new Le("","Your request is making it's way!",3,N.CheckMark,V.Success))}),n(2,re=!1)},x=async function(b){(await ue.acceptFriendRequest(b)).onSuccess(()=>{F.acceptRequest(b)})},se=async function(b){(await ue.denyFriendRequest(b)).onSuccess(()=>{F.denyRequest(b)})},fe=async function(b){(await ue.cancelFriendRequest(b)).onSuccess(()=>{F.cancelRequest(b)})},le=async function(b){(await ue.removeFriend(b)).onSuccess(()=>{F.removeFriend(b)})},pe=async function(b){(await ue.blockUser(b)).onSuccess(()=>{F.blockUser(b)})},ie=async function(b){(await ue.unblockUser(b)).onSuccess(()=>{F.unblockUser(b)})},G="";const qe={includeMatches:!0,shouldSort:!0,threshold:.35,minMatchCharLength:1,keys:["name"]};let Ee=$e(be.state.chats);be.state.chats.subscribe(b=>n(6,Ee=b));let Fe=$e(F.state.activeChat);F.state.activeChat.subscribe(b=>n(7,Fe=b));async function Ae(b){let j=$e(F.state.user);b?await navigator.clipboard.writeText(`${j.name}#${j.id.short}`):await navigator.clipboard.writeText(`${j.key}`)}const mt=b=>n(3,L=!0),gt=(b,j)=>{const oe=new Date(b.last_message_at||0);return new Date(j.last_message_at||0).getTime()-oe.getTime()},ht=b=>be.removeSidebarChat(b),dt=b=>n(4,Q="all"),bt=b=>n(4,Q="all"),kt=b=>n(4,Q="active"),vt=b=>n(4,Q="active"),wt=b=>n(4,Q="blocked"),Ct=b=>n(4,Q="blocked");function St(b){m=b,n(5,m)}const Rt=b=>{n(2,re=b.detail)},qt=async b=>await Ae(!1),At=async()=>await Ae(!0),Dt=async()=>await Ae(!1);function It(b){G=b,n(0,G)}const Ut=async(b,j)=>{let oe=F.getChatForUser(b.item.key);if(oe)F.setActiveChat(oe);else{let me=await Ie.createConversation(b.item);me.onSuccess(he=>{F.setActiveChat(he)}),me.onFailure(async he=>{(await Ie.listConversations()).onSuccess(Be=>{let de=Be.find(Te=>Te.users.includes(b.item.key));de&&F.setActiveChat(de)})})}Ue(ke.Chat)},Mt=(b,j)=>{le(b.item.key)},Bt=(b,j)=>{pe(b.item.key)},Tt=async(b,j)=>{let oe=F.getChatForUser(b.key);if(oe)F.setActiveChat(oe),Ue(ke.Chat);else{let me=await Ie.createConversation(b);me.onSuccess(he=>{F.setActiveChat(he),Ue(ke.Chat)}),me.onFailure(async he=>{(await Ie.listConversations()).onSuccess(Be=>{let de=Be.find(Te=>Te.users.includes(b.key));de&&(F.setActiveChat(de),Ue(ke.Chat))})})}},Et=(b,j)=>le(b.key),Ft=(b,j)=>pe(b.key),Nt=(b,j)=>fe(b.to),Vt=(b,j)=>x(b.from),Ot=(b,j)=>se(b.from),Pt=(b,j)=>ie(b.key),Lt=()=>n(3,L=!1),jt=()=>n(3,L=!1);return l.$$.update=()=>{l.$$.dirty[0]&268435456&&n(10,i=F.inboundRequests(I)),l.$$.dirty[0]&268435456&&n(9,c=F.outboundRequests(I)),l.$$.dirty[0]&2&&n(27,f=new tn(o,qe)),l.$$.dirty[0]&134217728&&n(8,$=f.search("")),l.$$.dirty[0]&134217729&&G!==void 0&&n(8,$=f.search(G))},R(n(14,e=be.state.sidebarOpen)),h(n(13,r=F.getUsers(F.state.friends))),y(n(12,s=F.getUsers(F.state.blocked))),M(n(11,a=F.state.activeRequests)),[G,o,re,L,Q,m,Ee,Fe,$,c,i,a,s,r,e,q,k,z,Me,A,x,se,fe,le,pe,ie,Ae,f,I,mt,gt,ht,dt,bt,kt,vt,wt,Ct,St,Rt,qt,At,Dt,It,Ut,Mt,Bt,Tt,Et,Ft,Nt,Vt,Ot,Pt,Lt,jt]}class Ir extends ut{constructor(t){super(),$t(this,t,ar,fr,ct,{},null,[-1,-1,-1])}}export{Ir as component};
